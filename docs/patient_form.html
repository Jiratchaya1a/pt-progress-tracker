<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</title>

<!-- Flatpickr Thai -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/th.js"></script>

<!-- QR Code -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
  body { font-family:'Segoe UI', Tahoma, Geneva, Verdana,sans-serif; padding:20px; background:#f4f6f8; }
  h2,h3{color:#333;}
  input,select{width:100%;padding:6px;border-radius:5px;border:1px solid #ccc;}
  .row{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px;}
  .row>div{flex:1;min-width:130px;}
  button{background:#1976d2;color:white;border:none;padding:8px 12px;border-radius:5px;cursor:pointer;font-size:13px;}
  button:hover{background:#115293;}

  .btn-del { background:#d32f2f !important; }
  .btn-del:hover { background:#9a0007 !important; }

  table{width:100%;border-collapse:collapse;margin-top:10px;background:white;}
  th{background:#1976d2;color:white;padding:8px;}
  td{padding:8px;border-bottom:1px solid #ddd;font-size:12px;}
  tr:hover{background:#f1f1f1;}

  #qrModal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);justify-content:center;align-items:center;}
  #qrBox{background:white;padding:20px;border-radius:10px;text-align:center;width:300px;}
  #qrPatientName{font-weight:bold;margin-top:10px;}
</style>
</head>
<body>

<h2>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>

<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏° -->
<div class="row">
  <div><label>HN:</label><input id="hn"></div>
  <div><label>CID:</label><input id="cid"></div>
  <div><label>AN:</label><input id="an"></div>
</div>

<div class="row">
  <div><label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label><input id="fullname"></div>
  <div><label>‡πÄ‡∏û‡∏®:</label>
    <select id="gender"><option>‡∏ä‡∏≤‡∏¢</option><option>‡∏´‡∏ç‡∏¥‡∏á</option></select>
  </div>
  <div><label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</label><input id="dob"></div>
  <div>
    <label>‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:</label>
    <select id="insurance">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤ --</option>
      <option>‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏≠‡∏á (UC)</option>
      <option>‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏≠‡∏á ‡∏ó.1</option>
      <option>‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏≠‡∏á ‡∏ó.2</option>
      <option>‡∏ö‡∏±‡∏ï‡∏£‡∏ó‡∏≠‡∏á ‡∏ó.3</option>
      <option>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ö‡∏¥‡∏Å‡πÑ‡∏î‡πâ)</option>
      <option>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ ‡∏ó‡∏´‡∏≤‡∏£/‡∏ï‡∏≥‡∏£‡∏ß‡∏à</option>
      <option>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</option>
      <option>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° (SSO)</option>
      <option>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏°.33</option>
      <option>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏°.39</option>
      <option>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏°.40</option>
      <option>‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ (‡πÄ‡∏ö‡∏¥‡∏Å ‡∏≠‡∏õ‡∏ó.)</option>
      <option>‡πÄ‡∏î‡πá‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏Å‡∏¥‡∏î</option>
      <option>‡∏ó‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢/‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô (UCEP Plus)</option>
      <option>‡∏Ç‡πâ‡∏≤‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</option>
      <option>‡∏£‡∏±‡∏ê‡∏ß‡∏¥‡∏™‡∏≤‡∏´‡∏Å‡∏¥‡∏à</option>
      <option>‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô (UCEP)</option>
      <option>‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û</option>
      <option>‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡πÇ‡∏£‡∏Ñ‡πÄ‡∏£‡∏∑‡πâ‡∏≠‡∏£‡∏±‡∏á</option>
      <option>‡∏ï‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ß (‡∏ö‡∏±‡∏ï‡∏£‡∏ä‡∏°‡∏û‡∏π)</option>
      <option>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏≠‡∏á</option>
    </select>
  </div>
</div>

<div class="row">
  <div><label>‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà:</label><input id="house_no"></div>
  <div><label>‡∏´‡∏°‡∏π‡πà:</label><input id="moo"></div>
  <div><label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label><select id="province" onchange="updateDistricts()"></select></div>
  <div><label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label><select id="district" onchange="updateSubdistricts()"></select></div>
  <div><label>‡∏ï‡∏≥‡∏ö‡∏•:</label><select id="subdistrict"></select></div>
  <div><label>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</label><input id="zipcode" readonly></div>
</div>

<div class="row">
  <div><label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</label><input id="phone"></div>
  <div>
  <label>‡∏ô‡∏±‡∏Å‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ö‡∏≥‡∏ö‡∏±‡∏î:</label>
  <select id="pt">
    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ô‡∏±‡∏Å‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ö‡∏≥‡∏ö‡∏±‡∏î --</option>
    <option>‡∏Å‡∏†.‡πÄ‡∏ô‡∏ï‡∏¥‡∏°‡∏≤ ‡∏®‡∏£‡∏µ‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì</option>
    <option>‡∏Å‡∏†.‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡∏û‡∏£‡∏´‡∏°‡∏à‡∏£‡∏±‡∏™</option>
    <option>‡∏Å‡∏†.‡∏õ‡∏¥‡πà‡∏ô‡∏ä‡∏ô‡∏Å ‡∏û‡∏£‡∏´‡∏°‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡πå </option>
    <option>‡∏Å‡∏†.‡∏à‡∏£‡∏¥‡∏¢‡∏≤ ‡∏ê‡∏¥‡∏ô‡∏∞‡∏Å‡∏∏‡∏•</option>
  </select>
</div>
</div>

<div class="row">
  <div><label>‡πÅ‡∏û‡πâ‡∏¢‡∏≤:</label><input id="drug_allergy"></div>
  <div><label>‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß:</label><input id="chronic_disease"></div>
  <div style="flex:2"><label>‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢:</label><input id="diagnosis"></div>
</div>

<button onclick="addPatient()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</button>

<h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>

<table>
  <thead>
    <tr>
      <th>#</th><th>HN</th><th>‡∏ä‡∏∑‡πà‡∏≠</th><th>‡∏≠‡∏≤‡∏¢‡∏∏</th><th>‡πÄ‡∏û‡∏®</th>
      <th>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</th><th>‡πÄ‡∏ö‡∏≠‡∏£‡πå</th><th>Dx</th><th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
    </tr>
  </thead>
  <tbody id="patientTable"></tbody>
</table>

<!-- Modal QR -->
<div id="qrModal">
  <div id="qrBox">
    <h3>QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
    <div id="qrcode"></div>
    <div id="qrPatientName"></div>
    <button onclick="qrModal.style.display='none'">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>

<script>
/* --- Flatpickr Thai + ‡πÅ‡∏™‡∏î‡∏á ‡∏û.‡∏®. --- */
flatpickr("#dob", {
  locale: "th",
  altInput: true,
  altFormat: "d F Y",
  dateFormat: "Y-m-d",
  onReady: function(selectedDates, dateStr, instance) {
    if(dateStr){
      const d = new Date(dateStr);
      instance.altInput.value = `${d.getDate()} ${instance.l10n.months.longhand[d.getMonth()]} ${d.getFullYear()+543}`;
    }
  },
  onChange: function(selectedDates, dateStr, instance){
    if(selectedDates[0]){
      const d = selectedDates[0];
      instance.altInput.value = `${d.getDate()} ${instance.l10n.months.longhand[d.getMonth()]} ${d.getFullYear()+543}`;
    }
  }
});

/* --- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏†‡∏≤‡∏Ñ‡πÉ‡∏ï‡πâ --- */
const data = {
  "‡∏ä‡∏∏‡∏°‡∏û‡∏£": { "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏û‡∏£":[{sub:"‡∏ö‡∏≤‡∏á‡∏´‡∏°‡∏≤‡∏Å",zip:"86000"},{sub:"‡∏ó‡πà‡∏≤‡πÅ‡∏ã‡∏∞",zip:"86120"}], "‡∏™‡∏ß‡∏µ":[{sub:"‡∏ô‡∏≤‡πÇ‡∏û‡∏ò‡∏¥‡πå",zip:"86130"},{sub:"‡∏Ñ‡∏£‡∏ô",zip:"86130"},{sub:"‡∏ó‡∏∏‡πà‡∏á‡∏£‡∏∞‡∏¢‡∏∞",zip:"86130"},{sub:"‡∏ó‡πà‡∏≤‡∏´‡∏¥‡∏ô",zip:"86130"},{sub:"‡∏î‡πà‡∏≤‡∏ô‡∏™‡∏ß‡∏µ",zip:"86130"}] },
  "‡∏™‡∏á‡∏Ç‡∏•‡∏≤": { "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏™‡∏á‡∏Ç‡∏•‡∏≤":[{sub:"‡∏ö‡πà‡∏≠‡∏¢‡∏≤‡∏á",zip:"90000"},{sub:"‡πÄ‡∏Ç‡∏≤‡∏£‡∏π‡∏õ‡∏ä‡πâ‡∏≤‡∏á",zip:"90000"}], "‡∏´‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà":[{sub:"‡∏´‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ô",zip:"90110"},{sub:"‡∏Ñ‡∏≠‡∏´‡∏á‡∏™‡πå",zip:"90110"}] },
  "‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä": { "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏®‡∏£‡∏µ‡∏ò‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏ä":[{sub:"‡∏õ‡∏≤‡∏Å‡∏û‡∏π‡∏ô",zip:"80000"},{sub:"‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠",zip:"80000"}], "‡∏û‡∏£‡∏´‡∏°‡∏Ñ‡∏µ‡∏£‡∏µ":[{sub:"‡∏û‡∏£‡∏´‡∏°‡πÇ‡∏•‡∏Å",zip:"80220"}] },
  "‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï": { "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï":[{sub:"‡∏ï‡∏•‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà",zip:"83000"},{sub:"‡∏£‡∏±‡∏©‡∏é‡∏≤",zip:"83000"}] },
  "‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ": { "‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ":[{sub:"‡∏ö‡∏≤‡∏á‡πÉ‡∏ö‡πÑ‡∏°‡πâ",zip:"84000"},{sub:"‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏ï‡∏µ‡πâ‡∏¢",zip:"84000"}], "‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏î‡∏¥‡∏©‡∏ê‡πå":[{sub:"‡∏Ñ‡∏•‡∏≠‡∏á‡∏û‡∏≤",zip:"84140"}] }
};

/* --- Dropdown dependent --- */
function updateProvinces(){
  province.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>';
  for(let p in data) province.innerHTML+=`<option>${p}</option>`;
}
updateProvinces();

function updateDistricts(){
  district.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ --</option>';
  subdistrict.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏• --</option>';
  zipcode.value='';
  if(province.value)
    for(let d in data[province.value]) district.innerHTML+=`<option>${d}</option>`;
}

function updateSubdistricts(){
  subdistrict.innerHTML='<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏• --</option>';
  zipcode.value='';
  if(district.value){
    data[province.value][district.value].forEach(s=>subdistrict.innerHTML+=`<option value="${s.sub}" data-zip="${s.zip}">${s.sub}</option>`);
  }
}

subdistrict.addEventListener('change',()=>{
  const sel=subdistrict.selectedOptions[0];
  if(sel) zipcode.value=sel.dataset.zip;
});

/* --- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏≤‡∏¢‡∏∏ --- */
function calculateAge(dob){
  const b=new Date(dob),t=new Date();
  let y=t.getFullYear()-b.getFullYear();
  let m=t.getMonth()-b.getMonth();
  let d=t.getDate()-b.getDate();
  if(d<0){m--;d+=30;}
  if(m<0){y--;m+=12;}
  return `${y} ‡∏õ‡∏µ ${m} ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ${d} ‡∏ß‡∏±‡∏ô`;
}

/* --- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ --- */
let patients=[];
function addPatient(){
  const p={
    hn:hn.value.trim(),
    fullname:fullname.value.trim(),
    dob:dob.value,
    gender:gender.value,
    insurance:insurance.value,
    house_no:house_no.value.trim(),
    moo:moo.value.trim(),
    province:province.value,
    district:district.value,
    subdistrict:subdistrict.value,
    zipcode:zipcode.value,
    phone:phone.value.trim(),
    pt:pt.value.trim(),
    drug_allergy:drug_allergy.value.trim(),
    chronic_disease:chronic_disease.value.trim(),
    diagnosis:diagnosis.value.trim()
  };
  if(!p.hn||!p.fullname||!p.dob||!p.diagnosis){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å HN, ‡∏ä‡∏∑‡πà‡∏≠, ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î ‡πÅ‡∏•‡∏∞ ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢');return;}
  p.age=calculateAge(p.dob);
  patients.push(p);
  renderTable();
  ['hn','fullname','dob','house_no','moo','province','district','subdistrict','zipcode','phone','pt','drug_allergy','chronic_disease','diagnosis'].forEach(id=>document.getElementById(id).value='');
  gender.selectedIndex=0; insurance.selectedIndex=0;
}

/* --- Render Table --- */
function renderTable(){
  const tb=document.getElementById("patientTable");
  tb.innerHTML="";
  patients.forEach((p,i)=>{
    const addr=`${p.house_no} ‡∏´‡∏°‡∏π‡πà ${p.moo} ${p.subdistrict} ${p.district} ${p.province}`;
    tb.innerHTML+=`
      <tr>
        <td>${i+1}</td>
        <td>${p.hn}</td>
        <td>${p.fullname}</td>
        <td>${p.age}</td>
        <td>${p.gender}</td>
        <td>${addr}</td>
        <td>${p.phone}</td>
        <td>${p.diagnosis}</td>
        <td>
          <button onclick="generateQR(${i})">üì± QR</button>
          <button class="btn-del" onclick="deletePatient(${i})">üóëÔ∏è ‡∏•‡∏ö</button>
        </td>
      </tr>
    `;
  });
}

/* --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ --- */
function deletePatient(index){
  if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
    patients.splice(index,1);
    renderTable();
  }
}

/* --- ‡∏™‡∏£‡πâ‡∏≤‡∏á QR --- */
const assessmentBaseUrl = "assessment_form.html";
function generateQR(index){
  const p = patients[index];
  const link = `${assessmentBaseUrl}?hn=${encodeURIComponent(p.hn)}&name=${encodeURIComponent(p.fullname)}`;
  document.getElementById("qrcode").innerHTML = "";
  document.getElementById("qrPatientName").innerText = p.fullname;
  new QRCode(document.getElementById("qrcode"), {
      text: link,
      width: 220,
      height: 220
  });
  qrModal.style.display = "flex";
}
</script>
</body>
</html>
